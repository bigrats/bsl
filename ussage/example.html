<!DOCTYPE html>
<html>
<head>
    <title>Boilit Script Language</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>

    <link rel="stylesheet" type="text/css" href="../themes/default/css.css">
    <link type="text/css" rel="stylesheet" href="../scripts/prettify/themes/boilit.css" media="screen"/>

    <script type="text/javascript" src="../scripts/prettify/scripts/prettify.js"></script>

</head>
<body onload="prettyPrint();">

<h1>模型数据</h1>
<pre class="prettyprint language-java linenums">
package test;

import java.util.ArrayList;
import java.util.List;

public final class Stock {

    public String name;
    public String name2;
    public String url;
    public String symbol;
    public double price;
    public double change;
    public double ratio;

    public Stock(String name, String name2, String url, String symbol, double price, double change, double ratio) {
        this.name = name;
        this.name2 = name2;
        this.url = url;
        this.symbol = symbol;
        this.price = price;
        this.change = change;
        this.ratio = ratio;
    }

    public String getName() {
        return this.name;
    }

    public String getName2() {
        return this.name2;
    }

    public String getUrl() {
        return this.url;
    }

    public String getSymbol() {
        return this.symbol;
    }

    public double getPrice() {
        return this.price;
    }

    public double getChange() {
        return this.change;
    }

    public double getRatio() {
        return this.ratio;
    }

    public static List&lt;Stock&gt; dummyItems() {
    List&lt;Stock&gt; items = new ArrayList&lt;Stock&gt;();
        items.add(new Stock("Adobe Systems", "Adobe Systems Inc.", "http://www.adobe.com", "ADBE", 39.26, 0.13, 0.33));
        items.add(new Stock("Advanced Micro Devices", "Advanced Micro Devices Inc.", "http://www.amd.com", "AMD", 16.22, 0.17, 1.06));
        items.add(new Stock("Amazon.com", "Amazon.com Inc", "http://www.amazon.com", "AMZN", 36.85, -0.23, -0.62));
        items.add(new Stock("Apple", "Apple Inc.", "http://www.apple.com", "AAPL", 85.38, -0.87, -1.01));
        items.add(new Stock("BEA Systems", "BEA Systems Inc.", "http://www.bea.com", "BEAS", 12.46, 0.09, 0.73));
        items.add(new Stock("CA", "CA, Inc.", "http://www.ca.com", "CA", 24.66, 0.38, 1.57));
        items.add(new Stock("Cisco Systems", "Cisco Systems Inc.", "http://www.cisco.com", "CSCO", 26.35, 0.13, 0.5));
        items.add(new Stock("Dell", "Dell Corp.", "http://www.dell.com/", "DELL", 23.73, -0.42, -1.74));
        items.add(new Stock("eBay", "eBay Inc.", "http://www.ebay.com", "EBAY", 31.65, -0.8, -2.47));
        items.add(new Stock("Google", "Google Inc.", "http://www.google.com", "GOOG", 495.84, 7.75, 1.59));
        items.add(new Stock("Hewlett-Packard", "Hewlett-Packard Co.", "http://www.hp.com", "HPQ", 41.69, -0.02, -0.05));
        items.add(new Stock("IBM", "International Business Machines Corp.", "http://www.ibm.com", "IBM", 97.45, -0.06, -0.06));
        items.add(new Stock("Intel", "Intel Corp.", "http://www.intel.com", "INTC", 20.53, -0.07, -0.34));
        items.add(new Stock("Juniper Networks", "Juniper Networks, Inc", "http://www.juniper.net/", "JNPR", 18.96, 0.5, 2.71));
        items.add(new Stock("Microsoft", "Microsoft Corp", "http://www.microsoft.com", "MSFT", 30.6, 0.15, 0.49));
        items.add(new Stock("Oracle", "Oracle Corp.", "http://www.oracle.com", "ORCL", 17.15, 0.17, 1.0));
        items.add(new Stock("SAP", "SAP AG", "http://www.sap.com", "SAP", 46.2, -0.16, -0.35));
        items.add(new Stock("Seagate Technology", "Seagate Technology", "http://www.seagate.com/", "STX", 27.35, -0.36, -1.3));
        items.add(new Stock("Sun Microsystems", "Sun Microsystems Inc.", "http://www.sun.com", "SUNW", 6.33, -0.01, -0.16));
        items.add(new Stock("Yahoo", "Yahoo! Inc.", "http://www.yahoo.com", "YHOO", 28.04, -0.17, -0.6));
        return items;
    }
}
</pre>

<h1>模板内容</h1>
<pre class="prettyprint language-html linenums">
&lt;!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"&gt;
&lt;html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"&gt;
&lt;head&gt;
    &lt;title&gt;Stock Prices - Bsl&lt;/title&gt;
    &lt;meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/&gt;
    &lt;meta http-equiv="Content-Style-Type" content="text/css"/&gt;
    &lt;meta http-equiv="Content-Script-Type" content="text/javascript"/&gt;
    &lt;link rel="shortcut icon" href="/images/favicon.ico"/&gt;
    &lt;link rel="stylesheet" type="text/css" href="/css/style.css" media="all"/&gt;
    &lt;script type="text/javascript" src="/js/util.js"&gt;&lt;/script&gt;
    &lt;style type="text/css"&gt;
            /*&lt;![CDATA[*/
        body {
            color: #333333;
            line-height: 150%;
        }

        thead {
            font-weight: bold;
            background-color: #CCCCCC;
        }

        .odd {
            background-color: #FFCCCC;
        }

        .even {
            background-color: #CCCCFF;
        }

        .minus {
            color: #FF0000;
        }

            /*]]&gt;*/
    &lt;/style&gt;
&lt;/head&gt;

&lt;body&gt;

&lt;h1&gt;Stock Prices - Bsl&lt;/h1&gt;
&lt;table&gt;
    &lt;thead&gt;
    &lt;tr&gt;
        &lt;th&gt;#&lt;/th&gt;
        &lt;th&gt;symbol&lt;/th&gt;
        &lt;th&gt;name&lt;/th&gt;
        &lt;th&gt;price&lt;/th&gt;
        &lt;th&gt;change&lt;/th&gt;
        &lt;th&gt;ratio&lt;/th&gt;
    &lt;/tr&gt;
    &lt;/thead&gt;
    &lt;tbody&gt;
    &lt;!--[ loop(item, items){ ]--&gt;
    &lt;tr class="${item_index%2==0?'odd':'even'}"&gt;
        &lt;td style="text-align: center"&gt;${item_index + 1}&lt;/td&gt;
        &lt;td&gt;
            &lt;a href="/stocks/${item.symbol}"&gt;${item.symbol}&lt;/a&gt;
        &lt;/td&gt;
        &lt;td&gt;
            &lt;a href="${item.url}"&gt;${item.name}&lt;/a&gt;
        &lt;/td&gt;
        &lt;td&gt;
            &lt;strong&gt;${item.price}&lt;/strong&gt;
        &lt;/td&gt;
        &lt;!--[ if(item.change &lt; 0.0d) { ]--&gt;
        &lt;td class="minus"&gt;${item.change}&lt;/td&gt;
        &lt;td class="minus"&gt;${item.ratio}&lt;/td&gt;
        &lt;!--[ } else { ]--&gt;
        &lt;td&gt;${item.change}&lt;/td&gt;
        &lt;td&gt;${item.ratio}&lt;/td&gt;
        &lt;!--[ } ]--&gt;
    &lt;/tr&gt;
    &lt;!--[ } ]--&gt;
    &lt;/tbody&gt;
&lt;/table&gt;

&lt;/body&gt;
&lt;/html&gt;
</pre>

<h1>引擎调用</h1>
<pre class="prettyprint language-java linenums">
package test;

import org.boilit.bsl.Engine;
import org.boilit.bsl.xio.FileResourceLoader;
import org.boilit.bsl.xtc.EmptyCompressor;
import org.boilit.logger.DefaultLogger;

import java.util.HashMap;
import java.util.List;
import java.util.Map;

public class BslTest {
    public static void main(String[] args) throws Exception {
        String file = "D:\\W04WorkSpace\\Maven001\\Bsl\\src\\test\\java\\test\\bsl.html";

        List&lt;Stock&gt; items = Stock.dummyItems();

        Engine engine = new Engine();
        engine.clearTemplateCache();
        engine.setLogger(new DefaultLogger());
        engine.setInputEncoding(System.getProperty("file.encoding"));
        engine.setOutputEncoding("UTF-8");
        engine.setSpecifiedEncoder(false);
        engine.setUseTemplateCache(true);
        engine.setResourceLoader(new FileResourceLoader(engine.getInputEncoding()));
        engine.setTextCompressor(new EmptyCompressor());

        Map&lt;String, Object&gt; model = new HashMap&lt;String, Object&gt;();
        model.put("items", items);
        engine.getTemplate(file).execute(model, System.out);
        // 如果需要，请关闭输出流
    }
}
</pre>
</body>
</html>